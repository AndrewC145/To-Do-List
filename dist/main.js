(()=>{"use strict";const e=document.querySelector(".submit-btn"),t=document.querySelector(".title-box"),o=document.querySelector(".description-box"),n=document.querySelector(".date-box"),c=document.querySelector(".priority-box"),d=document.querySelector("#project-selection"),i=document.querySelector(".submit-project"),r=[],l=[],s=[],a=[],u=[];function m(){localStorage.setItem("inbox",JSON.stringify(r)),localStorage.setItem("today",JSON.stringify(l)),localStorage.setItem("tomorrow",JSON.stringify(s)),localStorage.setItem("week",JSON.stringify(a)),localStorage.setItem("projects",JSON.stringify(u))}class p{constructor(e,t,o,n,c){this.title=e,this.description=t,this.date=o,this.priority=n,this.locationInbox=c}}class h{constructor(e){this.title=e,this.todos=[]}}function y(e){return`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`}function S(e){const t=document.querySelector(".todoSection");if(t.innerHTML="",!e||0===e.length)return t.innerHTML="<h2>No todos to display</h2>",void(t.style.color="white");e.forEach(((o,n)=>{const c=document.createElement("div"),d=document.createElement("div"),i=document.createElement("div"),m=document.createElement("input"),p=document.createElement("h3"),h=document.createElement("span"),y=document.createElement("h3"),v=document.createElement("div"),g=document.createElement("p"),E=document.createElement("div"),f=document.createElement("button"),L=document.createElement("img");c.classList.add("todoContainer"),d.classList.add("todoList"),i.classList.add("todoHeader"),m.classList.add("check"),p.classList.add("todoTitle"),h.classList.add("todo-priority"),"High"===o.priority?h.classList.add("high"):"Medium"===o.priority?h.classList.add("medium"):h.classList.add("low"),y.classList.add("date"),v.classList.add("todoBody"),g.classList.add("todoDescription"),E.classList.add("todoIcons"),f.classList.add("todo-trash"),m.type="checkbox",p.textContent=o.title,h.textContent=o.priority,y.textContent=o.date,g.textContent=o.description,L.src="../dist/svg/trash-bin-minimalistic-svgrepo-com.svg",f.appendChild(L),E.appendChild(f),v.appendChild(g),v.appendChild(E),i.appendChild(m),i.appendChild(p),i.appendChild(h),i.appendChild(y),d.appendChild(i),d.appendChild(v),c.appendChild(d),t.appendChild(c),f.addEventListener("click",(()=>{c.remove(),e.splice(n,1);const t=e=>{if(!e)return;const t=e.findIndex((e=>e.title===o.title));-1!==t&&e.splice(t,1)};t(r),t(l),t(s),t(a);const d=u.find((e=>e.title===o.locationInbox));d&&d.todos&&t(d.todos),S(e)})),m.addEventListener("click",(()=>{m.checked?(c.style.textDecoration="line-through",c.style.color="grey"):(c.style.textDecoration="none",c.style.color="black")}))}))}function v(){t.value="",o.value="",n.value="",c.value="Priority",document.querySelector(".add-todo-dialog").close()}function g(){document.querySelectorAll(".delete-project").forEach((e=>{e.addEventListener("click",(()=>{let t=e.parentElement.parentElement;const o=t.querySelector(".project-button").textContent;t.remove();const n=u.findIndex((e=>e.title===o));if(-1!==n){const e=e=>{const t=t=>{const o=t.findIndex((t=>t.title===e.title));-1!==o&&t.splice(o,1)};t(r),t(l),t(s),t(a)};u.splice(n,1)[0].todos.forEach(e)}const c=document.querySelector("#project-selection"),d=Array.from(c.options).find((e=>e.textContent===o));d&&d.remove(),document.querySelector(".inboxName").textContent===o&&(document.querySelector(".inboxName").textContent="Inbox",S(r)),m(),E()}))}))}function E(){const e=document.querySelector(".inboxName").textContent;S("Inbox"===e?r:"Today"===e?l:"Tomorrow"===e?s:"Week"===e?a:u.find((t=>t.title===e)).todos)}function f(){(function(){const e=JSON.parse(localStorage.getItem("inbox")),t=JSON.parse(localStorage.getItem("today")),o=JSON.parse(localStorage.getItem("tomorrow")),n=JSON.parse(localStorage.getItem("week")),c=JSON.parse(localStorage.getItem("projects"));e&&r.push(...e),t&&l.push(...t),o&&s.push(...o),n&&a.push(...n),c&&u.push(...c),function(){const e=document.querySelector(".projects-section"),t=document.querySelector("#project-selection");u.forEach((o=>{const n=document.createElement("option");n.textContent=o.title,n.value=o.title,t.appendChild(n);const c=document.createElement("div"),d=document.createElement("button"),i=document.createElement("div"),r=document.createElement("button"),l=document.createElement("img");c.classList.add("project"),d.classList.add("project-button"),i.classList.add("project-icons"),r.classList.add("delete-project"),d.textContent=o.title,l.src="../dist/svg/trash-bin-minimalistic-svgrepo-com.svg",r.appendChild(l),i.appendChild(r),c.appendChild(d),c.appendChild(i),e.appendChild(c),d.addEventListener("click",(()=>{document.querySelector(".inboxName").textContent=o.title,S(o.todos)}))})),g()}()})(),S(r),function(){const e=document.querySelector(".inbox-button"),t=document.querySelector(".today-button"),o=document.querySelector(".tomorrow-button"),n=document.querySelector(".week-button"),c=document.querySelector(".inboxName");e.addEventListener("click",(()=>{c.textContent="Inbox",S(r)})),t.addEventListener("click",(()=>{c.textContent="Today",S(l)})),o.addEventListener("click",(()=>{c.textContent="Tomorrow",S(s)})),n.addEventListener("click",(()=>{c.textContent="Week",S(a)}))}(),e.addEventListener("click",(e=>{e.preventDefault(),function(){const e=t.value,i=o.value,h=n.value;let v=c.value;const g=d.value;let E=y(new Date),f=y(new Date(Date.now()+864e5)),L=y(new Date(Date.now()+6048e5));if(""===e||"Priority"===v||!h)return void alert("Please fill out the required fields");v=v.charAt(0).toUpperCase()+v.slice(1);const x=new p(e,i,h,v,g);r.push(x),h===E?l.push(x):h===f?s.push(x):h===L&&a.push(x);const C=u.find((e=>e.title===g));C&&C.todos.push(x),m(),S(r)}(),v(),E()})),i.addEventListener("click",(e=>{e.preventDefault(),function(){const e=document.querySelector(".project-title-box").value;if(u.some((t=>t.title===e)))return void alert("Project already exists");if(""===e||e.length>24)return void alert("Please enter a valid project title");const t=new h(e);u.push(t),m();const o=document.createElement("option");o.textContent=e,o.value=e,d.appendChild(o);const n=document.createElement("div"),c=document.createElement("button"),i=document.createElement("div"),r=document.createElement("button"),l=document.createElement("img"),s=document.querySelector(".projects-section");n.classList.add("project"),c.classList.add("project-button"),i.classList.add("project-icons"),r.classList.add("delete-project"),c.textContent=e,l.src="../dist/svg/trash-bin-minimalistic-svgrepo-com.svg",r.appendChild(l),i.appendChild(r),n.appendChild(c),n.appendChild(i),s.appendChild(n),c.addEventListener("click",(()=>{document.querySelector(".inboxName").textContent=e,S(t.todos)}))}(),g(),console.log(u)}))}const L=document.querySelector(".sidebar"),x=document.querySelector(".add-todo-dialog"),C=document.querySelector(".add-project-dialog"),b=document.querySelector(".project-title-box");function q(){const e=document.querySelector(".main-container");L.classList.toggle("hidden"),e.classList.toggle("full-width")}function k(){x.showModal()}function j(){x.close(),v()}function w(){C.showModal(),b.value=""}function I(){C.close()}document.addEventListener("DOMContentLoaded",(()=>{!function(){const e=document.querySelectorAll(".toggle-sidebar"),t=document.querySelector(".add-todo"),o=document.querySelector(".cancel-todo"),n=document.querySelector(".add-todo-dialog"),c=document.querySelector(".add-project"),d=document.querySelector(".cancel-project"),i=document.querySelector(".submit-project");e.forEach((e=>{e.addEventListener("click",q)})),t.addEventListener("click",k),o.addEventListener("click",j),document.addEventListener("click",(e=>{e.target===n&&j(),e.target===C&&I()})),c.addEventListener("click",w),d.addEventListener("click",I),i.addEventListener("click",I)}(),f()}))})();